<div class="subscription-status">
  <h3>Subscription Status</h3>

  @if (isLoading()) {
    <div class="loading">
      <p>Loading subscription...</p>
    </div>
  } @else if (subscription(); as sub) {
    <div class="status-card">
      <div class="status-header">
        <span class="status-badge" [class]="getStatusColor(sub.status)">
          {{ sub.status | titlecase }}
        </span>
        <span class="plan-name">{{ sub.plan.name }}</span>
      </div>

      <div class="status-details">
        <p>Current period: {{ formatDate(sub.currentPeriodStart) }} - {{ formatDate(sub.currentPeriodEnd) }}</p>
        <p class="amount">${{ sub.plan.amount / 100 }}/{{ sub.plan.interval }}</p>

        @if (sub.cancelAtPeriodEnd) {
          <p class="cancel-notice">Will cancel at period end</p>
        }
      </div>

      <div class="plan-features">
        <h4>Features:</h4>
        <ul>
          @for (feature of sub.plan.features; track feature) {
            <li>{{ feature }}</li>
          }
        </ul>
      </div>
    </div>
  } @else {
    <div class="no-subscription">
      <p>No active subscription</p>
      <p>Choose a plan to get started</p>
    </div>
  }
</div>

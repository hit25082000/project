<div class="payment-page">
  <div class="page-header">
    <h1>{{ isSubscription() ? 'Complete Subscription' : 'Complete Payment' }}</h1>
    @if (selectedPlan(); as plan) {
      <p>Subscribe to {{ plan.name }} plan</p>
    }
  </div>

  @if (selectedPlan(); as plan) {
    <div class="plan-summary">
      <h2>{{ plan.name }}</h2>
      <p class="price">${{ plan.amount / 100 }}/{{ plan.interval }}</p>
      <p>{{ plan.description }}</p>
      <ul>
        @for (feature of plan.features; track feature) {
          <li>{{ feature }}</li>
        }
      </ul>
    </div>
  }

  <app-payment-form
    [amount]="selectedPlan()?.amount || 0"
    [currency]="selectedPlan()?.currency || 'usd'"
    [isSubscription]="isSubscription()"
    [planId]="selectedPlan()?.id || null"
    (paymentSuccess)="onPaymentSuccess($event)"
    (paymentError)="onPaymentError($event)"
  ></app-payment-form>
</div>
